/*! For license information please see index.js.LICENSE.txt */
!function(){var e={703:function(e,t,a){"use strict";var r=a(414);function n(){}function i(){}i.resetWarningCache=n,e.exports=function(){function e(e,t,a,n,i,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:n};return a.PropTypes=a,a}},697:function(e,t,a){e.exports=a(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},745:function(e,t,a){"use strict";var r=a(533);t.s=r.createRoot,r.hydrateRoot},251:function(e,t,a){"use strict";var r=a(363),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var r,i={},c=null,d=null;for(r in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:d,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},893:function(e,t,a){"use strict";e.exports=a(251)},363:function(e){"use strict";e.exports=React},533:function(e){"use strict";e.exports=ReactDOM}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=a(363),t=MaterialUI;const r=e=>{switch(e){case"dark":return{common:{black:"#000",white:"#fff"},a:{link:"#29b6f6",visited:"#ce93d8"},primary:{main:"#24292e",light:"#4f5358",dark:"#191c21",contrastText:"#d6d6ff"},secondary:{main:"#ce93d8",light:"#f3e5f5",dark:"#ab47bc",contrastText:"rgba(0, 0, 0, 0.87)"},error:{main:"#f44336",light:"#e57373",dark:"#d32f2f",contrastText:"#fff"},warning:{main:"#ffa726",light:"#ffb74d",dark:"#f57c00",contrastText:"rgba(0, 0, 0, 0.87)"},info:{main:"#29b6f6",light:"#4fc3f7",dark:"#0288d1",contrastText:"rgba(0, 0, 0, 0.87)"},success:{main:"#66bb6a",light:"#81c784",dark:"#388e3c",contrastText:"rgba(0, 0, 0, 0.87)"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},palette:{mode:e,contrastThreshold:3,tonalOffset:.2,text:{primary:"#93aff3",secondary:"rgba(149,183,228,0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"hwb(216deg 14% 73% / 99%)",default:"hwb(215deg 8% 83%)"},action:{active:"#fff",hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24},taskManager:{strokeColor:"#90ff91",MemoryColor:"#0002ff",idleColor:"black",color1:"#58be59db",color2:"#58be59a1",color3:"#58be596b",color4:"#58be5921",bcolor1:"#189cdbff",bcolor2:"#189cdba1",bcolor3:"#189cdb66",bcolor4:"#189cdb38"}}};case"light":return{common:{black:"#000",white:"#fff"},a:{link:"#0288d1",visited:"#9c27b0"},primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0",contrastText:"#fff"},secondary:{main:"#9c27b0",light:"#ba68c8",dark:"#7b1fa2",contrastText:"#fff"},error:{main:"#d32f2f",light:"#ef5350",dark:"#c62828",contrastText:"#fff"},warning:{main:"#ed6c02",light:"#ff9800",dark:"#e65100",contrastText:"#fff"},info:{main:"#0288d1",light:"#03a9f4",dark:"#01579b",contrastText:"#fff"},success:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20",contrastText:"#fff"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},palette:{mode:e,contrastThreshold:3,tonalOffset:.2,text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:"#fff",default:"#fff"},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12},taskManager:{strokeColor:"#90ff91",MemoryColor:"#0002ff",idleColor:"black",color1:"#58be59db",color2:"#58be59a1",color3:"#58be596b",color4:"#58be5921",bcolor1:"#189cdbff",bcolor2:"#189cdba1",bcolor3:"#189cdb66",bcolor4:"#189cdb38"}}}}},n=(0,t.createTheme)(r("dark")),i=(0,t.createTheme)(r("light"));var s={root:{},popup:{},errorTarget:{},errors:{display:"flex",flexDirection:"column"},errorHeader:{display:"flex",flexDirection:"row",justifyContent:"space-between",borderBottom:"solid aquamarine 2px"}},o=a(893),l=a=>{const{notifications:r,clearNotifications:n}=a,[i,l]=(0,e.useState)(void 0),[c,d]=(0,e.useState)({}),[f,x]=(0,e.useState)(!1),p=(0,e.createRef)(),h=(0,t.useTheme)();return(0,e.useEffect)((()=>{l(r.reduce(((e,t)=>e+t.notifications.length),0)),d(r.reduce(((e,t)=>({...e,[t.target]:e[t.target]||!1})),{}))}),[r]),(0,o.jsxs)(t.Box,{sx:s.root,children:[(0,o.jsx)(t.IconButton,{id:"notifications",ref:p,onClick:()=>x((e=>!e)),children:(0,o.jsx)(t.Badge,{"aria-label":"Alerts",badgeContent:i,color:"secondary",children:(0,o.jsx)(t.Icon,{children:"notifications"})})}),(0,o.jsx)(t.Popover,{open:f,target:"notifications",onClose:()=>{x(!1)},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,o.jsxs)(t.Card,{sx:s.popup,elevation:9,children:[(0,o.jsx)(t.CardHeader,{avatar:(0,o.jsx)(t.Avatar,{sx:{bgcolor:h.palette.error.dark},"aria-label":"error",children:"!"}),action:(0,o.jsx)(t.IconButton,{onClick:()=>x(!1),"aria-label":"settings",children:(0,o.jsx)(t.Icon,{children:"close"})}),title:`${i} Errors`}),(0,o.jsx)(t.CardContent,{children:Object.entries(c).sort(((e,t)=>e[0].localeCompare(t[0]))).map((e=>(0,o.jsx)(t.CardContent,{sx:s.errors,children:Object.entries(r).filter((t=>t[1].target===e[0])).map((a=>(0,o.jsxs)(t.Box,{children:[(0,o.jsxs)(t.Box,{sx:s.errorHeader,children:[(0,o.jsx)(t.Typography,{children:e[0]}),(0,o.jsx)(t.Typography,{color:"textSecondary",children:a[1].type}),(0,o.jsx)(t.Typography,{children:a[1].level})]},"header"),(0,o.jsx)(t.Box,{sx:s.errors,children:Object.entries(a[1].notifications.reduce(((e,t)=>({...e,[t.notification]:(e[t.notification]||0)+1})),{})).map((e=>(0,o.jsx)(t.Typography,{variant:"tiny",children:`${e[1]}X ${e[0]}`},e[1])))},"errors")]},a[0])))},e[0])))}),(0,o.jsx)(t.CardActions,{disableSpacing:!0,children:(0,o.jsx)(t.IconButton,{onClick:()=>n(),"aria-label":"Clear Errors",children:(0,o.jsx)(t.Icon,{children:"delete"})})})]})})]})};const c={root:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"flex-start",alignItems:"stretch",columnGap:"10px",rowGap:"10px"},summaryStats:{cursor:"pointer"},chartArea:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"flex-start",alignItems:"flex-start"},chartHeader:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"center",justifyContent:"flex-start",alignItems:"flex-start"},categoryStats:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",alignItems:"flex-start",columnGap:"5px"},hidden:{display:"none"},statCatergoryHeader:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",alignItems:"center",borderBottom:"solid 1px"}};var d={root:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"space-between",alignItems:"flex-start",marginLeft:"5px",marginRight:"5px"}},f=e=>{const{stat:a,name:r,detail:n}=e;return(0,o.jsxs)(t.Box,{sx:d.root,children:[(0,o.jsx)(t.Typography,{variant:n?"h5":"h6",children:r}),n?(0,o.jsx)(t.List,{children:Object.entries(a.stat).map((e=>(0,o.jsxs)(t.ListItem,{children:[(0,o.jsx)(t.Typography,{variant:"little",color:"textPrimary",children:e[0]}),":",(0,o.jsx)(t.Typography,{variant:"little",color:"textSecondary",children:e[1]})]},e[0])))}):(0,o.jsx)(t.List,{children:Object.entries(a.stat).filter((e=>a.headerFields.includes(e[0]))).map((e=>(0,o.jsx)(t.Typography,{variant:"little",color:"textSecondary",children:e[1]},e[0])))})]})},x=Recharts,p={root:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"flex-start",alignItems:"stretch"},header:{display:"flex",flexDirection:"column",flexWrap:"nowrap",justifyContent:"center",alignItems:"stretch"},headerLine:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",width:"100%"},headerField:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center",alignItems:"center",width:"inherit"},stats:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center",alignItems:"center",padding:"0px"},stat:{display:"flex",padding:"0px",flexWrap:"nowrap",alignItems:"center",flexDirection:"row",justifyContent:"center"},tooltipContent:{display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center",justifyContent:"center",alignItems:"stretch",backgroundColor:"black",padding:"5px",border:"none"},tooltipHeader:{fontSize:"medium",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center",alignItems:"center",justifyContent:"center",borderBottom:"solid 1px"},threads:{margin:"0px",padding:"0px",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center",justifyContent:"center",alignItems:"stretch",border:"none",fontSize:"small"},thread:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignContent:"center",justifyContent:"space-between",alignItems:"center",padding:"0px",margin:"0px",columnGap:"5px"},threadName:{padding:"0px",margin:"0px",border:"none"},threadValue:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignContent:"center",justifyContent:"center",alignItems:"center",padding:"0px",margin:"0px",fontSize:"smaller",color:"aquamarine",border:"none",columnGap:"3px"},threadSummary:{fontSize:"x-small",padding:"0px",margin:"0px",color:"aqua"}},h=a=>{const{name:r,rawvalue:n,ignored:i,statsAnimateChange:s,maxSamples:l,headerFields:c,idleField:d,category:f,detail:h}=a,u=e=>Object.entries(e).filter((e=>!i.includes(e[0]))).reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),[m,g]=(0,e.useState)([Object.entries(u(n)).filter((e=>!i.includes(e[0]))).reduce(((e,t)=>(e[t[0]]=t[1],e)),{ts:(new Date).getTime()})]),y=e=>void 0===e||Number.isInteger(e)||isNaN(e)?e:e.toFixed(2),b=(0,t.useTheme)();(0,e.useMemo)((()=>{g(void 0===m?[Object.entries(u(n))]:[...m,Object.entries(u(n)).filter((e=>!i.includes(e[0]))).reduce(((e,t)=>(e[t[0]]=t[1],e)),{ts:(new Date).getTime()})].filter(((e,t,a)=>!(a.length>=l)||t>a.length-l)))}),[n]);const j=e=>{let{step:t,isIdle:a}=e;return a?b.palette.taskManager.idleColor:b.palette.taskManager[`${"Memory"===f?"b":""}color${t+1}`]},C=(e,t)=>e.name===d&&t.name!==d?1:e.name!==d&&t.name===d?-1:e.value-t.value;return(0,o.jsxs)(t.Box,{sx:p.root,children:[h&&(0,o.jsxs)(t.Box,{sx:p.header,children:[(0,o.jsxs)(t.Typography,{sx:p.headerLine,color:"textPrimary",variant:"subtitle1",children:[r," ",c&&Object.values(c).map((e=>(0,o.jsxs)(t.Typography,{sx:p.headerField,color:"textPrimary",variant:"subtitle2",children:[e,":",(0,o.jsx)(t.Typography,{color:"textSecondary",variant:"subtitle2",children:n[e]})]},e)))]}),(0,o.jsx)(t.List,{sx:p.stats,children:Object.entries(n).filter((e=>!i.includes(e[0]))).map((e=>(0,o.jsxs)(t.ListItem,{sx:p.stats,children:[(0,o.jsx)(t.Typography,{color:"textPrimary",variant:"little",children:e[0]}),":",(0,o.jsx)(t.Typography,{color:"textSecondary",variant:"little",children:y(e[1])})]},e[0])))})]}),(0,o.jsxs)(x.AreaChart,{data:m,height:h?300:80,width:h?500:200,stackOffset:"expand",children:[(0,o.jsx)("defs",{children:Object.entries(u(n)).filter((e=>void 0!==e[1])).map(((e,t,a)=>(0,o.jsxs)("linearGradient",{id:`color${e[0]}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,o.jsx)("stop",{offset:"5%",stopColor:j({numOfSteps:a.length,step:t,isIdle:e[0]===d}),stopOpacity:.8}),(0,o.jsx)("stop",{offset:"95%",stopColor:j({numOfSteps:a.length,step:t,isIdle:e[0]===d}),stopOpacity:0})]},`color${e[0]}`)))}),(0,o.jsx)(x.XAxis,{dataKey:"ts",name:"Time",hide:!h,tickFormatter:e=>new Date(e).toLocaleTimeString()}),(0,o.jsx)(x.YAxis,{hide:!0}),(0,o.jsx)(x.CartesianGrid,{strokeDasharray:"3 3"}),(0,o.jsx)(x.Tooltip,{content:e=>((e,a)=>(0,o.jsxs)(t.Box,{sx:a.tooltipContent,children:[(0,o.jsx)(t.Box,{sx:a.tooltipHeader,children:e.labelFormatter(e.label)}),(0,o.jsx)(t.List,{sx:a.threads,children:e.payload.sort(((e,t)=>C(t,e))).map((r=>(0,o.jsxs)(t.ListItem,{sx:a.thread,children:[(0,o.jsx)(t.Box,{sx:a.threadName,style:{color:r.color},children:r.name}),(0,o.jsxs)(t.Box,{sx:a.threadValue,children:[y(r.value),(0,o.jsxs)(t.Box,{sx:a.threadSummary,children:["(",(r.value/e.payload.reduce(((e,t)=>e+t.value),0)*100).toFixed(2),"%)"]})]})]},r.name)))})]}))(e,p),labelFormatter:e=>new Date(e).toLocaleString()}),Object.entries(u(n)).filter((e=>void 0!==e[1])).sort(((e,t)=>C({name:e[0],chartValue:e[1]},{name:t[0],chartValue:t[1]}))).map((e=>(0,o.jsx)(x.Area,{isAnimationActive:s,type:"monotone",fillOpacity:1,fill:`url(#color${e[0]})`,stroke:"Memory"===f?b.palette.taskManager.memoryColor:b.palette.taskManager.strokeColor,dataKey:e[0],stackId:"1"},e[0])))]})]})},u={summary:{display:"flex",flexDirection:"column",flexWrap:"wrap",alignContent:"flex-start",justifyContent:"flex-start",alignItems:"center"},header:{display:"flex",flexDirection:"column",flexWrap:"nowrap",justifyContent:"center",alignItems:"stretch"},headerLine:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",width:"100%"},stats:{display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center",alignItems:"center",padding:"0px"},stat:{display:"flex",padding:"0px",flexWrap:"nowrap",alignItems:"center",flexDirection:"row",justifyContent:"center"},tooltipContent:{display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center",justifyContent:"center",alignItems:"stretch",backgroundColor:"black",padding:"5px"},tooltipHeader:{fontSize:"medium",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center",alignItems:"center",justifyContent:"center",borderBottom:"solid 1px"},threads:{margin:"0px",padding:"0px",display:"flex",flexDirection:"column",flexWrap:"nowrap",alignContent:"center",justifyContent:"center",alignItems:"stretch",fontSize:"small"},thread:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignContent:"center",justifyContent:"space-between",alignItems:"center",columnGap:"5px"},threadValue:{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignContent:"center",justifyContent:"center",alignItems:"center",fontSize:"smaller",color:"aquamarine",columnGap:"3px"},threadSummary:{fontSize:"x-small",color:"aqua"}},m=e=>{const{name:a,rawvalue:r,ignored:n,statsAnimateChange:i,idleField:s,category:l,detail:c}=e,d=(0,t.useTheme)(),f=e=>{let{step:t,isIdle:a}=e;return a?d.palette.taskManager.idleColor:d.palette.taskManager[`${"Memory"===l?"b":""}color${t+1}`]};return(0,o.jsxs)(t.Box,{sx:u.summary,children:[(0,o.jsxs)(x.BarChart,{height:c?300:70,width:c?150:75,data:[Object.entries(r).filter((e=>!["name",...n].includes(e[0]))).reduce(((e,t)=>(e[t[0]]=t[1],e)),{name:a})],children:[(0,o.jsx)(x.XAxis,{hide:!0,dataKey:"name"}),(0,o.jsx)(x.YAxis,{hide:!0}),Object.keys(r).filter((e=>!n.includes(e))).sort(((e,t)=>e===s&&t!==s?1:e!==s&&t===s?-1:e.localeCompare(t))).map(((e,t)=>(0,o.jsx)(x.Bar,{dataKey:e,stackId:"a",fill:f({step:t,isIdle:e===s}),isAnimationActive:i,type:"monotone",fillOpacity:1},e)))]}),(0,o.jsxs)(t.Typography,{variant:"summary",children:[(Object.entries(r).filter((e=>![s,...n].includes(e[0]))).reduce(((e,t)=>e+t[1]),0)/Object.entries(r).filter((e=>!n.includes(e[0]))).reduce(((e,t)=>e+t[1]),0)*100).toFixed(0),"%"]})]})},g=a(697),y=a.n(g);const b=e=>{let{statsRefreshRate:a,setStatsRefreshRate:r,maxSamples:n,setMaxSamples:i,animateChart:s,setAnimateChart:l,open:c,setOpen:d}=e;return(0,o.jsxs)(t.Dialog,{open:c,onClose:()=>d(!1),children:[(0,o.jsx)(t.DialogTitle,{children:"Statistics Configuration"}),(0,o.jsxs)(t.DialogContent,{children:[(0,o.jsx)(t.TextField,{value:a,label:"Refresh Rate",InputProps:{endAdornment:(0,o.jsx)(t.InputAdornment,{children:"Sec"}),inputProps:{min:1,max:60}},type:"number",id:"refresh-rate",onChange:e=>{const t=e.target.value<1?1:e.target.value>60?60:e.target.value;r(t)},margin:"dense",fullWidth:!0,variant:"standard"}),(0,o.jsx)(t.TextField,{value:n,type:"number",label:"Max Samples",id:"max-samples",InputProps:{endAdornment:(0,o.jsx)(t.InputAdornment,{children:"Samples"}),inputProps:{min:3,max:250}},onChange:e=>{const t=e.target.value<3?3:e.target.value>250?250:e.target.value;i(t)},margin:"dense",fullWidth:!0,variant:"standard"}),(0,o.jsx)(t.FormControlLabel,{label:"Animate Chart",control:(0,o.jsx)(t.Checkbox,{defaultChecked:s,onChange:e=>l(e.target.checked)})})]}),(0,o.jsx)(t.DialogActions,{children:(0,o.jsx)(t.Button,{onClick:()=>d(!1),children:"Done"})})]})},j=a=>{let{open:r,addNotification:n}=a;const i=JSON.parse(localStorage.getItem("statsConfig")),[s,l]=(0,e.useState)(void 0),[d,x]=(0,e.useState)(void 0),[p,u]=(0,e.useState)(void 0),[g,y]=(0,e.useState)(void 0),[j,C]=(0,e.useState)(i&&void 0!==i.statsRefreshRate?i.statsRefreshRate:3),[I,S]=(0,e.useState)(i&&void 0!==i.maxSamples?i.maxSamples:50),[v,w]=(0,e.useState)(!(!i||void 0===i.animateChart)&&i.animateChart),[E,R]=(0,e.useState)({Package:!1,CPU:!1,Memory:!1,NightDriver:!1}),[D,T]=(0,e.useState)(!1);if((0,e.useEffect)((()=>{localStorage.setItem("statsConfig",JSON.stringify({statsRefreshRate:j,animateChart:v,maxSamples:I}))}),[j,v,I]),(0,e.useEffect)((()=>{if(g&&g.abort(),r){const e=new AbortController;return y(e),(e=>fetch("/statistics",{signal:e.signal}).then((e=>e.json())).then((e=>(y(void 0),{CPU:{CPU:{stat:{CORE0:e.CPU_USED_CORE0,CORE1:e.CPU_USED_CORE1,IDLE:(200-e.CPU_USED_CORE0-e.CPU_USED_CORE1)/200*100,USED:e.CPU_USED},idleField:"IDLE",ignored:["USED"],headerFields:["USED"]}},Memory:{HEAP:{stat:{USED:e.HEAP_SIZE-e.HEAP_FREE,FREE:e.HEAP_FREE,MIN:e.HEAP_MIN,SIZE:e.HEAP_SIZE},idleField:"FREE",headerFields:["SIZE","MIN"],ignored:["SIZE","MIN"]},DMA:{stat:{USED:e.DMA_SIZE-e.DMA_FREE,FREE:e.DMA_FREE,MIN:e.DMA_MIN,SIZE:e.DMA_SIZE},idleField:"FREE",headerFields:["SIZE","MIN"],ignored:["SIZE","MIN"]},PSRAM:{stat:{USED:e.PSRAM_SIZE-e.PSRAM_FREE,FREE:e.PSRAM_FREE,MIN:e.PSRAM_MIN,SIZE:e.PSRAM_SIZE},idleField:"FREE",headerFields:["SIZE","MIN"],ignored:["SIZE","MIN"]}},NightDriver:{FPS:{stat:{LED:e.LED_FPS,SERIAL:e.SERIAL_FPS,AUDIO:e.AUDIO_FPS}}},Package:{CHIP:{stat:{MODEL:e.CHIP_MODEL,CORES:e.CHIP_CORES,SPEED:e.CHIP_SPEED,PROG_SIZE:e.PROG_SIZE},static:!0,headerFields:["MODEL"]},CODE:{stat:{SIZE:e.CODE_SIZE,FREE:e.CODE_FREE,FLASH_SIZE:e.FLASH_SIZE},static:!0,headerFields:["SIZE"]}}}))))(e).then(l).catch((e=>n("Error","Service","Get Statistics",e))),d&&(clearTimeout(d),x(void 0)),j&&r&&x(setTimeout((()=>u(Date.now())),1e3*j)),()=>{d&&clearTimeout(d),g&&g.abort()}}}),[j,p,r]),!s&&r)return(0,o.jsx)(t.Box,{children:"Loading..."});const k=r?{}:c.hidden;return s&&(0,o.jsxs)(t.Box,{sx:{...c.root,...k},children:[(0,o.jsx)(t.IconButton,{sx:{padding:"0px",height:"100%"},onClick:()=>T(!0),children:(0,o.jsx)(t.Icon,{children:" settings"})}),D&&(0,o.jsx)(b,{statsRefreshRate:j,setStatsRefreshRate:C,maxSamples:I,setMaxSamples:S,animateChart:v,setAnimateChart:w,open:D,setOpen:T}),Object.entries(s).map((e=>{const a=e[0],r=E[a],n=r?{}:c.summaryStats;return(0,o.jsxs)(t.Box,{children:[r?(0,o.jsxs)(t.Box,{sx:c.statCatergoryHeader,children:[(0,o.jsx)(t.Typography,{variant:"h5",children:a}),(0,o.jsx)(t.IconButton,{onClick:()=>R((e=>({...e,[a]:!r}))),children:(0,o.jsx)(t.Icon,{children:"minimize"})})]},"header"):(0,o.jsx)(t.Box,{children:(0,o.jsx)(t.Typography,{color:"textPrimary",children:a})}),(0,o.jsxs)(t.Box,{sx:c.categoryStats,children:[Object.entries(e[1]).filter((e=>e[1].static)).map((a=>(0,o.jsx)(t.Box,{sx:{summarySx:n},onClick:()=>!E[e[0]]&&R((t=>({...t,[e[0]]:!E[e[0]]}))),children:(0,o.jsx)(f,{detail:E[e[0]],name:a[0],stat:a[1]},`static-${a[0]}`)},`entry-${a[0]}`))),(0,o.jsx)(t.Box,{sx:c.categoryStats,children:Object.entries(e[1]).filter((e=>!e[1].static)).map((a=>(0,o.jsxs)(t.Box,{onClick:()=>!E[e[0]]&&R((t=>({...t,[e[0]]:!E[e[0]]}))),sx:{cursor:"pointer",...c.chartArea,...n},children:[e[1][a[0]].idleField&&(0,o.jsx)(m,{name:a[0],className:a[0],category:e[0],detail:E[e[0]],rawvalue:a[1].stat,idleField:e[1][a[0]].idleField,statsAnimateChange:v,headerFields:e[1][a[0]].headerFields,ignored:e[1][a[0]].ignored||[]},`Bar-${a[0]}`),(0,o.jsx)(h,{name:a[0],category:e[0],detail:E[e[0]],statsAnimateChange:v,rawvalue:a[1].stat,maxSamples:I,idleField:e[1][a[0]].idleField,headerFields:e[1][a[0]].headerFields,ignored:e[1][a[0]].ignored||[]},`Area-${a[0]}`)]},`chart-${a[0]}`)))},"charts")]})]},a)}))]})};j.propTypes={open:y().bool.isRequired,addNotification:y().func.isRequired},b.propTypes={statsRefreshRate:y().number.isRequired,setStatsRefreshRate:y().func.isRequired,maxSamples:y().number.isRequired,setMaxSamples:y().func.isRequired,animateChart:y().bool.isRequired,setAnimateChart:y().func.isRequired,open:y().bool.isRequired,setOpen:y().func.isRequired};var C=j,I={root:{display:"flex",flexDirection:"row",columnGap:"3px",alignItems:"center"},timeremaining:{width:"100px"}},S=a=>{const{label:r,millisecondsRemaining:n,requestRefresh:i}=a,[s,l]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{if(n){const t=Date.now()+n;l(t-Date.now());var e=!1;const a=setInterval((()=>{const a=t-Date.now();a>=0&&l(a),a<=100&&!e&&(e=!0,i())}),50);return()=>clearInterval(a)}}),[n,i]),(0,o.jsxs)(t.Box,{sx:I.root,children:[(0,o.jsx)(t.Typography,{variant:"little",color:"textPrimary",children:r}),":",(0,o.jsx)(t.Typography,{color:"textSecondary",sx:I.timeremaining,variant:"little",children:s})]})},v=HTMLReactParser,w=a.n(v);const E={margin:"dense",fullWidth:!0,variant:"standard",FormHelperTextProps:{component:"div"}},R=a=>{let{setting:r,updateData:n,updateError:i}=a;const[s,l]=(0,e.useState)(r.value),[c,d]=(0,e.useState)(!1),f=(0,t.useTheme)(),x=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.GlobalStyles,{styles:{"a:link":{color:f.a.link},"a:visited":{color:f.a.visited}}}),w()(r.description)]}),[p,h]=(0,e.useState)(x),u={label:r.friendlyName,id:r.name,onChange:e=>l(e.target.value),value:s};(0,e.useEffect)((()=>{i(r.name,c)}),[r,i,c]),(0,e.useEffect)((()=>{s!==r.value&&n(r.name,""===s?void 0:s)}),[s,n,r]);const m=!!r.readOnly;switch(r.type){case 0:case 2:default:return(0,o.jsx)(t.TextField,{...u,...E,helperText:p});case 1:return(0,o.jsx)(t.TextField,{...u,...E,error:c,onError:e=>i(r.name,e),helperText:p,onChange:e=>{const t=e.target.value;""===t||t<0||t>2**32?c||(d(!0),h(`Value must be between 0 and ${2**32}`)):c&&(d(!1),h(x)),!t||isNaN(t)?l(""):l(Math.floor(e.target.value))}});case 3:return(0,o.jsx)(t.FormControlLabel,{...u,control:(0,o.jsx)(t.Checkbox,{disabled:m,defaultChecked:!!r.value,onChange:e=>l(e.target.checked)})})}},D=a=>{let{heading:r,effectIndex:n,open:i,setOpen:s}=a;const l="/settings"+(void 0!==n?"/effect":""),[c,d]=(0,e.useState)((0,o.jsx)("h2",{children:"Configuration Loading..."})),[f,x]=(0,e.useState)({}),[p,h]=(0,e.useState)(new Set),[u,m]=(0,e.useState)(!1),g=async()=>{await fetch(l,{method:"POST",body:new URLSearchParams({effectIndex:n,...f})}).then((e=>e.json())),s(!1)},y=()=>{s(!1)};return(0,e.useMemo)((()=>{const e=`${l}/specs${void 0!==n?`?effectIndex=${n}`:""}`,a=`${l}${void 0!==n?`?effectIndex=${n}`:""}`,r=(e,t)=>{x((a=>(void 0!==t?a[e]=t:a[e]&&delete a[e],a)))},i=(e,t)=>{h(t?t=>(t.add(e),t):t=>(t.delete(e),t)),m(p.size>0)};(async()=>{const[n,s]=await Promise.all([fetch(e).then((e=>e.json())),fetch(a).then((e=>e.json()))]);d((0,o.jsx)(t.Box,{children:n.map((e=>(e.name in s&&(e.value=s[e.name]),(0,o.jsx)(R,{setting:e,updateData:r,updateError:i},e.name))))}))})()}),[n]),(0,o.jsxs)(t.Dialog,{open:i,onClose:y,children:[(0,o.jsxs)(t.DialogTitle,{children:[r," Configuration"]}),(0,o.jsx)(t.DialogContent,{children:c}),(0,o.jsxs)(t.DialogActions,{children:[(0,o.jsx)(t.Button,{onClick:y,children:"Cancel"}),(0,o.jsx)(t.Button,{disabled:u,onClick:g,children:"Apply"}),(0,o.jsx)(t.Button,{disabled:u,onClick:async()=>{await g(),await fetch("/reset",{method:"POST",body:new URLSearchParams({board:1})})},children:"Apply and Reboot Device"})]})]})};D.defaultProps={effectIndex:void 0},D.propTypes={heading:y().string.isRequired,effectIndex:y().number,open:y().bool.isRequired,setOpen:y().func.isRequired};const T=y().shape({name:y().string.isRequired,friendlyName:y().string.isRequired,description:y().string.isRequired,type:y().number.isRequired,typeName:y().string.isRequired,value:y().any,readOnly:y().bool,writeOnly:y().bool});R.propTypes={setting:T,updateData:y().func,updateError:y().func};var k=D;const O=a=>{const{effect:r,effectInterval:n,effectIndex:i,millisecondsRemaining:s,selected:l,effectEnable:c,navigateTo:d,requestRunning:f}=a,[x,p]=(0,e.useState)(0),[h,u]=(0,e.useState)(!1),m=(e=>({root:{display:"flex",flexDirection:"column",padding:"10px"},cardheader:{},hidden:{display:"none"},effect:{width:"180px",display:"flex",flexDirection:"column",flexWrap:"nowrap",justifyContent:"space-between"},effectPannel:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around"},effectName:{marginLeft:"10px",marginBottom:"5px"},unselected:{opacity:"30%"},selected:{backgroundColor:e.palette.background.paper}}))((0,t.useTheme)());return(0,e.useEffect)((()=>{if(s&&l){const e=Date.now()+s;Date.now();const t=setInterval((()=>{const t=e-Date.now();t>=0&&p(t/n*100)}),300);return()=>clearInterval(t)}l||p(0)}),[s,l,n]),(0,o.jsxs)(t.Card,{variant:"outlined",sx:m.effect,children:[(0,o.jsx)(t.CardHeader,{avatar:(0,o.jsx)(t.Avatar,{"aria-label":r.name,children:r.name[0]}),title:r.name,subheader:r.enabled?l?"Active":"Waiting":"Disabled",sx:m.cardheader}),(0,o.jsxs)(t.CardContent,{children:[l&&(0,o.jsx)(t.LinearProgress,{disabled:f,variant:"determinate",sx:{transition:"none"},value:x}),!l&&(0,o.jsx)(t.Button,{disabled:f,onClick:()=>c(i,!r.enabled),variant:"outlined",startIcon:(0,o.jsx)(t.Icon,{children:r.enabled?"stop":"circle"}),children:r.enabled?"Disable":"Enable"}),!l&&r.enabled&&(0,o.jsx)(t.Button,{disabled:f,onClick:()=>d(i),variant:"outlined",startIcon:(0,o.jsx)(t.Icon,{children:"start"}),children:"Trigger"})]}),(0,o.jsx)(t.CardActions,{disableSpacing:!0,children:(0,o.jsx)(t.IconButton,{onClick:()=>u(!0),"aria-label":"show more",children:(0,o.jsx)(t.Icon,{children:"settings"})})}),h&&(0,o.jsx)(k,{heading:r.name,effectIndex:i,open:h,setOpen:u})]})};O.propTypes={effect:y().shape({name:y().string.isRequired,enabled:y().bool.isRequired}).isRequired,effectInterval:y().number.isRequired,effectIndex:y().number.isRequired,millisecondsRemaining:y().number,selected:y().bool,effectEnable:y().func.isRequired,navigateTo:y().func.isRequired,requestRunning:y().bool.isRequired};var P=O,A={root:{display:"flex",flexDirection:"column"},hidden:{display:"none"},effectsHeader:{display:"flex",flexDirection:"row",borderBottom:"solid 1px",columnGap:"5px"},effectsHeaderValue:{display:"flex",flexDirection:"row",columnGap:"3px",alignItems:"center"},effects:{display:"flex",flexDirection:"row",flexWrap:"wrap",padding:"10px",columnGap:"15px",rowGap:"15px",paddingTop:"20px"}};const B=a=>{let{open:r,addNotification:n}=a;const[i,s]=(0,e.useState)(void 0),[l,c]=(0,e.useState)(void 0),[d,f]=(0,e.useState)(void 0),[x,p]=(0,e.useState)(!1),[h,u]=(0,e.useState)(!1),[m,g]=(0,e.useState)(i&&i.effectInterval);(0,e.useEffect)((()=>{if(l&&l.abort(),r){const e=new AbortController;c(e);const t=setTimeout((()=>{f(Date.now())}),3e3);return b("/effects",{signal:e.signal}).then((e=>e.json())).then(s).then((()=>clearTimeout(t))).catch((e=>n("Error","Service","Get Effect List",e))),()=>{l&&l.abort(),clearTimeout(t)}}}),[r,d]);const y=()=>setTimeout((()=>f(Date.now())),50),b=(e,t,a)=>new Promise(((r,i)=>fetch(e,t).then(r).catch((e=>{n("Error",a,e),i(e)})))),j=e=>new Promise(((t,a)=>{u(!0),b("/currentEffect",{method:"POST",body:new URLSearchParams({currentEffectIndex:e})},"navigateTo").then(t).then(y).catch(a).finally((()=>u(!1)))})),C=(e,t)=>new Promise(((a,r)=>{u(!0),b(`/${t?"enable":"disable"}Effect`,{method:"POST",body:new URLSearchParams({effectIndex:e})},"effectEnable").then(a).then(y).catch(r).finally((()=>u(!1)))})),I=e=>new Promise(((t,a)=>{u(!0),b("/"+(e?"nextEffect":"previousEffect"),{method:"POST"},"nvigate").then(t).then(y).catch(a).finally((()=>u(!1)))}));if(!i&&r)return(0,o.jsx)(t.Box,{children:"Loading...."});const v=!r&&A.hidden;return i&&(0,o.jsxs)(t.Box,{sx:{...A.root,...v},children:[(0,o.jsxs)(t.Box,{sx:A.effectsHeader,children:[x?(0,o.jsx)(t.ClickAwayListener,{onClickAway:()=>{var e;e=m,new Promise(((t,a)=>{u(!0),b("/settings",{method:"POST",body:new URLSearchParams({effectInterval:e})},"updateEventInterval").then(t).then(y).catch(a).finally((()=>u(!1)))})),p(!1)},children:(0,o.jsx)(t.Box,{sx:A.effectsHeaderValue,children:(0,o.jsx)(t.TextField,{label:"Interval ms",variant:"outlined",type:"number",defaultValue:i.effectInterval,onChange:e=>g(e.target.value)})})}):(0,o.jsxs)(t.Box,{sx:A.effectsHeaderValue,children:[(0,o.jsx)(t.Typography,{variant:"little",color:"textPrimary",children:"Interval"}),":",(0,o.jsx)(t.Link,{href:"#",variant:"little",color:"textSecondary",onClick:()=>p(!0),children:i.effectInterval})]}),(0,o.jsx)(S,{label:"Time Remaining",requestRefresh:y,millisecondsRemaining:i.millisecondsRemaining}),i.Effects.length>1&&(0,o.jsxs)(t.Box,{children:[(0,o.jsx)(t.IconButton,{disabled:h,onClick:()=>I(!1),children:(0,o.jsx)(t.Icon,{children:"skip_previous"})}),(0,o.jsx)(t.IconButton,{disabled:h,onClick:()=>I(!0),children:(0,o.jsx)(t.Icon,{children:"skip_next"})}),(0,o.jsx)(t.IconButton,{disabled:h,onClick:()=>f(Date.now()),children:(0,o.jsx)(t.Icon,{children:"refresh"})})]})]}),(0,o.jsx)(t.Box,{sx:A.effects,children:i.Effects.map(((e,t)=>(0,o.jsx)(P,{effect:e,effectIndex:t,navigateTo:j,requestRunning:h,effectEnable:C,effectInterval:i.effectInterval,selected:t===i.currentEffect,millisecondsRemaining:i.millisecondsRemaining},`effect-${t}`)))})]})};B.propTypes={open:y().bool.isRequired,addNotification:y().func.isRequired};var _=B;const F=a=>{const r=JSON.parse(localStorage.getItem("config")),{mode:n,setMode:i}=a,s=(e=>({root:{display:"flex"},appbar:{transition:"width 0.2s linear"},appbarClosed:{zIndex:"1300 !important"},appbarOpened:{marginLeft:240,width:"calc(100% - 240px)"},toolbarTitle:{flexGrow:1},drawer:{whiteSpace:"nowrap",width:240,transition:"width 0.2s linear"},drawerClosed:{overflowX:"hidden",transition:"width 0.2s linear",width:7*e.spacing.unit,maxWidth:"65px",[e.breakpoints.up("sm")]:{width:9*e.spacing.unit}},drawerHeader:{display:"flex",flexWrap:"nowrap",minHeight:"64px",flexDirection:"row",justifyContent:"space-between"},displayMode:{display:"flex",flexWrap:"nowrap",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},content:{transition:"padding-left 0.2s linear"}}))((0,t.useTheme)()),[c,d]=(0,e.useState)(!(!r||void 0===r.drawerOpened)&&r.drawerOpened),[f,x]=(0,e.useState)(!r||void 0===r.stats||r.stats),[p,h]=(0,e.useState)(!r||void 0===r.designer||r.designer),[u,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)([]);(0,e.useEffect)((()=>{localStorage.setItem("config",JSON.stringify({stats:f,designer:p}))}),[f,p]);const b=(e,t,a,r)=>{y((n=>{const i=n.find((r=>r.level===e&&r.type==t&&r.target===a))||{level:e,type:t,target:a,notifications:[]};return i.notifications.push({date:new Date,notification:r}),[...n.filter((e=>e!==i)),i]}))},j=c?s.appbarOpened:s.appbarClosed,I=c?{}:s.drawerClosed;return(0,o.jsxs)(t.Box,{children:[(0,o.jsx)(t.AppBar,{sx:{...s.appbar,...j},children:(0,o.jsxs)(t.Toolbar,{children:[(0,o.jsx)(t.IconButton,{"aria-label":"Open drawer",onClick:()=>d(!c),children:(0,o.jsx)(t.Icon,{children:c?"chevron":"menu"})}),(0,o.jsx)(t.Typography,{sx:s.toolbarTitle,component:"h1",variant:"h6",children:"NightDriverStrip"}),g.length>0&&(0,o.jsx)(l,{notifications:g,clearNotifications:()=>y([])})]})}),(0,o.jsxs)(t.Drawer,{open:c,variant:"permanent",sx:{"& .MuiDrawer-paper":{...s.drawer,...I}},children:[(0,o.jsxs)(t.Box,{sx:{...s.drawerHeader},children:[(0,o.jsxs)(t.Box,{sx:s.displayMode,children:[(0,o.jsx)(t.IconButton,{onClick:()=>i("dark"===n?"light":"dark"),children:(0,o.jsx)(t.Icon,{children:"dark"===n?"dark_mode":"light_mode"})}),(0,o.jsx)(t.ListItemText,{primary:("dark"===n?"Dark":"Light")+" mode"})]}),(0,o.jsx)(t.IconButton,{onClick:()=>d(!c),children:(0,o.jsx)(t.Icon,{children:"chevron_left"})})]}),(0,o.jsx)(t.Divider,{}),(0,o.jsxs)(t.List,{children:[[{caption:"Home",flag:p,setter:h,icon:"home"},{caption:"Statistics",flag:f,setter:x,icon:"area_chart"}].map((e=>(0,o.jsxs)(t.ListItem,{children:[(0,o.jsx)(t.ListItemIcon,{children:(0,o.jsx)(t.IconButton,{onClick:()=>e.setter&&e.setter((e=>!e)),children:(0,o.jsx)(t.Icon,{color:e.flag?"primary":"action",children:e.icon})})}),(0,o.jsx)(t.ListItemText,{primary:e.caption})]},e.icon))),(0,o.jsxs)(t.ListItem,{children:[(0,o.jsx)(t.ListItemIcon,{children:(0,o.jsx)(t.IconButton,{onClick:()=>m((e=>!e)),children:(0,o.jsx)(t.Icon,{children:"settings"})})}),(0,o.jsx)(t.ListItemText,{primary:"Settings"})]})]})]}),(0,o.jsxs)(t.Box,{sx:{...s.content,p:10,pl:c?30:10},children:[(0,o.jsx)(C,{open:f,addNotification:b}),(0,o.jsx)(_,{open:p,addNotification:b})]}),u&&(0,o.jsx)(k,{heading:"Device Settings",open:u,setOpen:m})]})};F.propTypes={mode:y().string.isRequired,setMode:y().func.isRequired};var M=()=>{const[a,r]=(0,e.useState)(localStorage.getItem("theme")||"dark"),s=(0,e.useMemo)((()=>(e=>"dark"===e?n:i)(a)),[a]);return(0,e.useEffect)((()=>{localStorage.setItem("theme",a)}),[a]),(0,o.jsxs)(t.ThemeProvider,{theme:s,children:[(0,o.jsx)(t.CssBaseline,{}),(0,o.jsx)(F,{mode:a,setMode:r})]})};(0,a(745).s)(document.getElementById("root")).render((0,o.jsx)(M,{}))}()}();