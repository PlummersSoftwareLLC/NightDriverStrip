import{R as A}from"./rom-7e8b4fbe.js";var g=1074521556,C="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",I=1074520064,E="GOv8P9TnC0Bt6AtA7+wLQOnoC0CL6AtA6egLQEXpC0AC6gtAdOoLQB3qC0B95wtAn+kLQPTpC0Bj6QtAluoLQIrpC0CW6gtAWegLQK/oC0Dp6AtARekLQHPoC0BI6wtAr+wLQKHmC0DT7AtAoeYLQKHmC0Ch5gtAoeYLQKHmC0Ch5gtAoeYLQKHmC0Dv6gtAoeYLQMnrC0Cv7AtA",i=1073605544;class B extends A{constructor(){super(...arguments),this.CHIP_NAME="ESP32",this.IMAGE_CHIP_ID=0,this.EFUSE_RD_REG_BASE=1073061888,this.DR_REG_SYSCON_BASE=1073111040,this.UART_CLKDIV_REG=1072955412,this.UART_CLKDIV_MASK=1048575,this.UART_DATE_REG_ADDR=1610612856,this.XTAL_CLK_DIVIDER=1,this.FLASH_SIZES={"1MB":0,"2MB":16,"4MB":32,"8MB":48,"16MB":64},this.FLASH_WRITE_SIZE=1024,this.BOOTLOADER_FLASH_OFFSET=4096,this.SPI_REG_BASE=1072963584,this.SPI_USR_OFFS=28,this.SPI_USR1_OFFS=32,this.SPI_USR2_OFFS=36,this.SPI_W0_OFFS=128,this.SPI_MOSI_DLEN_OFFS=40,this.SPI_MISO_DLEN_OFFS=44,this.TEXT_START=I,this.ENTRY=g,this.DATA_START=i,this.ROM_DATA=E,this.ROM_TEXT=C}async read_efuse(A,g){const C=this.EFUSE_RD_REG_BASE+4*g;return A.debug("Read efuse "+C),await A.read_reg(C)}async get_pkg_version(A){const g=await this.read_efuse(A,3);let C=g>>9&7;return C+=(g>>2&1)<<3,C}async get_chip_revision(A){const g=await this.read_efuse(A,3),C=await this.read_efuse(A,5),I=await A.read_reg(this.DR_REG_SYSCON_BASE+124);return 0!=(g>>15&1)?0!=(C>>20&1)?0!=(I>>31&1)?3:2:1:0}async get_chip_description(A){const g=["ESP32-D0WDQ6","ESP32-D0WD","ESP32-D2WD","","ESP32-U4WDH","ESP32-PICO-D4","ESP32-PICO-V3-02"];let C="";const I=await this.get_pkg_version(A),E=await this.get_chip_revision(A),i=3==E;return 0!=(1&await this.read_efuse(A,3))&&(g[0]="ESP32-S0WDQ6",g[1]="ESP32-S0WD"),i&&(g[5]="ESP32-PICO-V3"),C=I>=0&&I<=6?g[I]:"Unknown ESP32",!i||0!==I&&1!==I||(C+="-V3"),C+" (revision "+E+")"}async get_chip_features(A){const g=["Wi-Fi"],C=await this.read_efuse(A,3);0===(2&C)&&g.push(" BT");0!==(1&C)?g.push(" Single Core"):g.push(" Dual Core");if(0!==(8192&C)){0!==(4096&C)?g.push(" 160MHz"):g.push(" 240MHz")}const I=await this.get_pkg_version(A);-1!==[2,4,5,6].indexOf(I)&&g.push(" Embedded Flash"),6===I&&g.push(" Embedded PSRAM");0!==(await this.read_efuse(A,4)>>8&31)&&g.push(" VRef calibration in efuse");0!==(C>>14&1)&&g.push(" BLK3 partially reserved");const E=3&await this.read_efuse(A,6);return g.push(" Coding Scheme "+["None","3/4","Repeat (UNSUPPORTED)","Invalid"][E]),g}async get_crystal_freq(A){const g=await A.read_reg(this.UART_CLKDIV_REG)&this.UART_CLKDIV_MASK,C=A.transport.baudrate*g/1e6/this.XTAL_CLK_DIVIDER;let I;return I=C>33?40:26,Math.abs(I-C)>1&&A.info("WARNING: Unsupported crystal in use"),I}_d2h(A){const g=(+A).toString(16);return 1===g.length?"0"+g:g}async read_mac(A){let g=await this.read_efuse(A,1);g>>>=0;let C=await this.read_efuse(A,2);C>>>=0;const I=new Uint8Array(6);return I[0]=C>>8&255,I[1]=255&C,I[2]=g>>24&255,I[3]=g>>16&255,I[4]=g>>8&255,I[5]=255&g,this._d2h(I[0])+":"+this._d2h(I[1])+":"+this._d2h(I[2])+":"+this._d2h(I[3])+":"+this._d2h(I[4])+":"+this._d2h(I[5])}}export{B as ESP32ROM};